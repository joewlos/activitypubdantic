<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>activitypubdantic.get_class API documentation</title>
<meta name="description" content="FUNCTIONS FOR SELECTING CLASSES TO PERFORM ACTIONS" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>activitypubdantic.get_class</code></h1>
</header>
<section id="section-intro">
<p>FUNCTIONS FOR SELECTING CLASSES TO PERFORM ACTIONS</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python"># -*- coding: utf-8 -*-
&#34;&#34;&#34;
FUNCTIONS FOR SELECTING CLASSES TO PERFORM ACTIONS
&#34;&#34;&#34;
# Import Pydantic models and their functions
from activitypubdantic.models import *
from activitypubdantic.get_model import get_model, get_model_data, get_model_json

# Import other packages
from datetime import datetime
import json
from typing import Union


&#34;&#34;&#34;
DEFAULTS
&#34;&#34;&#34;


_DEFAULT_LANGUAGES = [&#34;en&#34;, &#34;en-US&#34;]
_DEFAULT_MAP_FIELDS = {
    &#34;content_map&#34;: &#34;content&#34;,
    &#34;summary_map&#34;: &#34;summary&#34;,
    &#34;name_map&#34;: &#34;name&#34;,
}
_DEFAULT_PROTECTED_FIELDS = [&#34;data&#34;, &#34;model&#34;, &#34;input_json&#34;, &#34;_data&#34;, &#34;json&#34;]


&#34;&#34;&#34;
CLASSES
&#34;&#34;&#34;


class Base:
    &#34;&#34;&#34;
    Base extends default functions to all other classes.
    &#34;&#34;&#34;

    def __init__(
        self,
        model: Union[
            ActivityModel, ActorModel, CollectionModel, LinkModel, ObjectModel
        ],
        input_json: dict,  # TODO: There&#39;s no way this could be a list, right?
        default_languages: list = _DEFAULT_LANGUAGES,
    ):
        self.model = model
        self.input_json = input_json
        self._data = self.data(
            exclude_none=False, by_alias=False, use_input_json=True
        )  # Use underscore to avoid conflict with data() function

        # For each key,value pair in the input_json, set the class attribute
        for k, v in self._data.items():
            if k not in _DEFAULT_PROTECTED_FIELDS:
                setattr(self, k, v)

        # For mapped fields, update their corresponding value with the default language
        for k, v in _DEFAULT_MAP_FIELDS.items():
            if k in self._data:
                for language in default_languages:
                    if self._data[k] and language in self._data[k]:
                        setattr(self, v, self._data[k][language])
                        break

    def _internal_data(self):
        &#34;&#34;&#34;
        Get the internal data dictionary of unprotected and not null fields.
        &#34;&#34;&#34;
        clean_data = {}
        for k, v in self.__dict__.items():
            if k not in _DEFAULT_PROTECTED_FIELDS and v:
                clean_data[k] = v
        return clean_data

    def data(
        self,
        by_alias: bool = True,
        exclude_none: bool = True,
        verbose: bool = True,
        use_input_json: bool = False,
    ):
        &#34;&#34;&#34;
        Return the class input_json as a Python dictionary or list with settings.
        &#34;&#34;&#34;
        return get_model_data(
            self.input_json if use_input_json else self._internal_data(),
            by_alias=by_alias,
            exclude_none=exclude_none,
            verbose=verbose,
        )

    def json(
        self,
        by_alias: bool = True,
        exclude_none: bool = True,
        verbose: bool = True,
        indent: int = 2,
        use_input_json: bool = False,
    ):
        &#34;&#34;&#34;
        Return the class input_json as a JSON string with settings.
        &#34;&#34;&#34;
        return get_model_json(
            self.input_json if use_input_json else self._internal_data(),
            by_alias=by_alias,
            exclude_none=exclude_none,
            verbose=verbose,
            indent=indent,
        )


class Link(Base):
    &#34;&#34;&#34;
    Link data and associated functions.
    &#34;&#34;&#34;

    # Core type
    core_type = &#34;Link&#34;


class Object(Base):
    &#34;&#34;&#34;
    Object data and associated functions.
    &#34;&#34;&#34;

    # Core type
    core_type = &#34;Object&#34;

    def make_public(self):
        &#34;&#34;&#34;
        Remove any fields (bto and bcc) that should not be public.
        &#34;&#34;&#34;
        self.bto = None
        self.bcc = None

    def deliver_to(self, depth: int = 2):
        &#34;&#34;&#34;
        Recursively iterate to determine the audience.
        Use depth to set how deep the recursion should go.
        Some IDs may indicate collections, which must be handled differently.
        &#34;&#34;&#34;
        audience_fields = [&#34;to&#34;, &#34;bto&#34;, &#34;cc&#34;, &#34;bcc&#34;, &#34;audience&#34;]
        audience_members = []
        delivery_objects = [self._internal_data()]
        current_depth = 0

        # Iterate checking for the existence of delivery objects and our depth
        while current_depth &lt;= depth and len(delivery_objects) &gt; 0:
            new_delivery_objects = []
            for o in delivery_objects:
                for k, v in o.items():
                    if k in audience_fields and v:
                        audience_members += v

                    # If the key is an object, add it to the delivery objects
                    elif isinstance(v, dict) and v:
                        new_delivery_objects.append(v)

            # Set the new delivery objects
            delivery_objects = new_delivery_objects

            # Increase the delivery depth before looping again
            current_depth += 1

        # Get the id of each audience member and remove duplicates
        audience_members = [
            str(a[&#34;id&#34;]) if isinstance(a, dict) and &#34;id&#34; in a else str(a)
            for a in audience_members
        ]
        audience_members = list(set(audience_members))

        # Return the audience members
        return audience_members

    def create(self):
        &#34;&#34;&#34;
        Produce a new Activity of type Create with this Object.
        After insertion into database, add an ID.
        &#34;&#34;&#34;
        if self._internal_data() == {}:
            raise ValueError(&#34;Cannot create an empty Object.&#34;)
        return get_class(
            {
                &#34;type&#34;: &#34;Create&#34;,
                &#34;actor&#34;: self.actor,
                &#34;object&#34;: self._internal_data(),
                &#34;to&#34;: self.to,
                &#34;bto&#34;: self.bto,
                &#34;cc&#34;: self.cc,
                &#34;bcc&#34;: self.bcc,
                &#34;audience&#34;: self.audience,
                &#34;published&#34;: datetime.now(),
            }
        )

    def delete(self):
        &#34;&#34;&#34;
        Produce a new Activity of type Delete with this Object.
        Only provide an ID and published time for the Object.
        After insertion into database, add an ID.
        &#34;&#34;&#34;
        return get_class(
            {
                &#34;type&#34;: &#34;Delete&#34;,
                &#34;actor&#34;: self.actor,
                &#34;object&#34;: {
                    &#34;id&#34;: self.id,
                    &#34;published&#34;: self.published,
                },
                &#34;to&#34;: self.to,
                &#34;bto&#34;: self.bto,
                &#34;cc&#34;: self.cc,
                &#34;bcc&#34;: self.bcc,
                &#34;audience&#34;: self.audience,
                &#34;published&#34;: datetime.now(),
            }
        )

    def tombstone(self):
        &#34;&#34;&#34;
        Produce a new Tombstone.
        &#34;&#34;&#34;
        return get_class(
            {
                &#34;type&#34;: &#34;Tombstone&#34;,
                &#34;id&#34;: self.id,
                &#34;published&#34;: self.published,
                &#34;updated&#34;: datetime.now(),
                &#34;deleted&#34;: datetime.now(),
            }
        )


class Activity(Object):
    &#34;&#34;&#34;
    Activity data and associated functions.
    &#34;&#34;&#34;

    # Core type
    core_type = &#34;Activity&#34;

    def undo(self):
        &#34;&#34;&#34;
        Produce a new Undo of this Activity.
        After insertion into database, add an ID.
        &#34;&#34;&#34;
        return get_class(
            {
                &#34;type&#34;: &#34;Undo&#34;,
                &#34;object&#34;: self._internal_data(),
            }
        )


class Actor(Object):
    &#34;&#34;&#34;
    Actor data and associated functions.
    &#34;&#34;&#34;

    # Core type
    core_type = &#34;Actor&#34;

    def activity(self, action_type: str, object: Object = None):
        &#34;&#34;&#34;
        Produce a new Activity of the given type with this Actor as the actor
        and the given Object as the object of the activity.
        Intransitive Activities have no object.
        After insertion into database, add an ID.
        &#34;&#34;&#34;
        return get_class(
            {
                &#34;type&#34;: action_type,
                &#34;actor&#34;: self._internal_data(),
                &#34;object&#34;: object.data() if object else None,
            }
        )


class Collection(Object):
    &#34;&#34;&#34;
    Collection data and associated functions.
    &#34;&#34;&#34;

    # Core type
    core_type = &#34;Collection&#34;

    def add(self, object: Object = None):
        &#34;&#34;&#34;
        Add an Object to the Collection.
        &#34;&#34;&#34;
        if object._internal_data() == {}:
            raise ValueError(&#34;Cannot add an empty Object.&#34;)

        # Use the items or ordered_items fields
        if &#34;items&#34; in self._internal_data():
            self.items.insert(0, object.data())
            items_count = len(self.items)
        elif &#34;ordered_items&#34; in self._internal_data():
            self.ordered_items.insert(0, object.data())
            items_count = len(self.ordered_items)

        # Update total items
        self.total_items = items_count

    def remove(self, object: Object = None):
        &#34;&#34;&#34;
        Remove an Object from the Collection.
        The Object must have an ID.
        &#34;&#34;&#34;
        if object._internal_data() == {}:
            raise ValueError(&#34;Cannot remove an empty Object.&#34;)
        if object.id is None:
            raise ValueError(&#34;Cannot remove an Object without an ID.&#34;)

        # Use the items or ordered_items fields
        if &#34;items&#34; in self._internal_data():
            self.items = [i for i in self.items if &#34;id&#34; in i and i[&#34;id&#34;] != object.id]
            items_count = len(self.items)
        elif &#34;ordered_items&#34; in self._internal_data():
            self.ordered_items = [
                i for i in self.ordered_items if &#34;id&#34; in i and i[&#34;id&#34;] != object.id
            ]
            items_count = len(self.ordered_items)

        # Update total items
        self.total_items = items_count


&#34;&#34;&#34;
MAPPING DICTIONARY
&#34;&#34;&#34;


# Map type names to their classes
_CLASS_MAPPINGS = {
    &#34;Accept&#34;: Activity,  # Activity Section
    &#34;Add&#34;: Activity,
    &#34;Accounce&#34;: Activity,
    &#34;Arrive&#34;: Activity,
    &#34;Block&#34;: Activity,
    &#34;Create&#34;: Activity,
    &#34;Delete&#34;: Activity,
    &#34;Dislike&#34;: Activity,
    &#34;Flag&#34;: Activity,
    &#34;Follow&#34;: Activity,
    &#34;Ignore&#34;: Activity,
    &#34;Invite&#34;: Activity,
    &#34;Join&#34;: Activity,
    &#34;Leave&#34;: Activity,
    &#34;Like&#34;: Activity,
    &#34;Listen&#34;: Activity,
    &#34;Move&#34;: Activity,
    &#34;Offer&#34;: Activity,
    &#34;Question&#34;: Activity,
    &#34;Read&#34;: Activity,
    &#34;Reject&#34;: Activity,
    &#34;Remove&#34;: Activity,
    &#34;TentativeAccept&#34;: Activity,
    &#34;TentativeReject&#34;: Activity,
    &#34;Travel&#34;: Activity,
    &#34;Undo&#34;: Activity,
    &#34;Update&#34;: Activity,
    &#34;View&#34;: Activity,
    &#34;Application&#34;: Actor,  # Actor Section
    &#34;Group&#34;: Actor,
    &#34;Organization&#34;: Actor,
    &#34;Person&#34;: Actor,
    &#34;Service&#34;: Actor,
    &#34;Activity&#34;: Activity,  # Core Section
    &#34;Collection&#34;: Collection,
    &#34;CollectionPage&#34;: Collection,
    &#34;IntransitiveActivity&#34;: Activity,
    &#34;Link&#34;: Link,
    &#34;Object&#34;: Object,
    &#34;OrderedCollection&#34;: Collection,
    &#34;OrderedCollectionPage&#34;: Collection,
    &#34;Mention&#34;: Link,  # Link Section
    &#34;Article&#34;: Object,  # Object Section
    &#34;Audio&#34;: Object,
    &#34;Document&#34;: Object,
    &#34;Event&#34;: Object,
    &#34;Image&#34;: Object,
    &#34;Note&#34;: Object,
    &#34;Page&#34;: Object,
    &#34;Place&#34;: Object,
    &#34;Profile&#34;: Object,
    &#34;Relationship&#34;: Object,
    &#34;Tombstone&#34;: Object,
    &#34;Video&#34;: Object,
}


&#34;&#34;&#34;
FUNCTIONS
&#34;&#34;&#34;


def get_class(
    input_json: Union[dict, str]  # If string, assume it is JSON
) -&gt; Union[Activity, Actor, Collection, Link, Object]:
    &#34;&#34;&#34;
    Get a class for manipulating the input ActivityPub JSON.
    This function assumes any input string is JSON and parses it.
    &#34;&#34;&#34;
    if isinstance(input_json, str):
        input_json = json.loads(input_json)

    # Load a model from the input JSON
    output_model = get_model(input_json)

    # Return a class which includes possible actions for the ActivityPub JSON
    output_class = _CLASS_MAPPINGS[output_model.type]
    return output_class(output_model, input_json)


def get_class_from_model(
    input_model: Union[
        ActivityModel, CollectionModel, LinkModel, ObjectModel
    ]  # Must be a Pydantic model
) -&gt; Union[Activity, Actor, Collection, Link, Object]:
    &#34;&#34;&#34;
    Get a class for manipulating the input ActivityPub JSON.
    This function assumes any input is a Pydantic model, with no further validation required.
    &#34;&#34;&#34;
    output_class = _CLASS_MAPPINGS[input_model.type]
    return output_class(
        input_model,
        json.loads(input_model.model_dump_json(by_alias=True, exclude_none=True)),
    )</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="activitypubdantic.get_class.get_class"><code class="name flex">
<span>def <span class="ident">get_class</span></span>(<span>input_json: Union[dict, str]) ‑> Union[<a title="activitypubdantic.get_class.Activity" href="#activitypubdantic.get_class.Activity">Activity</a>, <a title="activitypubdantic.get_class.Actor" href="#activitypubdantic.get_class.Actor">Actor</a>, <a title="activitypubdantic.get_class.Collection" href="#activitypubdantic.get_class.Collection">Collection</a>, <a title="activitypubdantic.get_class.Link" href="#activitypubdantic.get_class.Link">Link</a>, <a title="activitypubdantic.get_class.Object" href="#activitypubdantic.get_class.Object">Object</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>Get a class for manipulating the input ActivityPub JSON.
This function assumes any input string is JSON and parses it.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_class(
    input_json: Union[dict, str]  # If string, assume it is JSON
) -&gt; Union[Activity, Actor, Collection, Link, Object]:
    &#34;&#34;&#34;
    Get a class for manipulating the input ActivityPub JSON.
    This function assumes any input string is JSON and parses it.
    &#34;&#34;&#34;
    if isinstance(input_json, str):
        input_json = json.loads(input_json)

    # Load a model from the input JSON
    output_model = get_model(input_json)

    # Return a class which includes possible actions for the ActivityPub JSON
    output_class = _CLASS_MAPPINGS[output_model.type]
    return output_class(output_model, input_json)</code></pre>
</details>
</dd>
<dt id="activitypubdantic.get_class.get_class_from_model"><code class="name flex">
<span>def <span class="ident">get_class_from_model</span></span>(<span>input_model: Union[<a title="activitypubdantic.models.core.ActivityModel" href="models/core.html#activitypubdantic.models.core.ActivityModel">ActivityModel</a>, <a title="activitypubdantic.models.core.CollectionModel" href="models/core.html#activitypubdantic.models.core.CollectionModel">CollectionModel</a>, <a title="activitypubdantic.models.core.LinkModel" href="models/core.html#activitypubdantic.models.core.LinkModel">LinkModel</a>, <a title="activitypubdantic.models.core.ObjectModel" href="models/core.html#activitypubdantic.models.core.ObjectModel">ObjectModel</a>]) ‑> Union[<a title="activitypubdantic.get_class.Activity" href="#activitypubdantic.get_class.Activity">Activity</a>, <a title="activitypubdantic.get_class.Actor" href="#activitypubdantic.get_class.Actor">Actor</a>, <a title="activitypubdantic.get_class.Collection" href="#activitypubdantic.get_class.Collection">Collection</a>, <a title="activitypubdantic.get_class.Link" href="#activitypubdantic.get_class.Link">Link</a>, <a title="activitypubdantic.get_class.Object" href="#activitypubdantic.get_class.Object">Object</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>Get a class for manipulating the input ActivityPub JSON.
This function assumes any input is a Pydantic model, with no further validation required.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_class_from_model(
    input_model: Union[
        ActivityModel, CollectionModel, LinkModel, ObjectModel
    ]  # Must be a Pydantic model
) -&gt; Union[Activity, Actor, Collection, Link, Object]:
    &#34;&#34;&#34;
    Get a class for manipulating the input ActivityPub JSON.
    This function assumes any input is a Pydantic model, with no further validation required.
    &#34;&#34;&#34;
    output_class = _CLASS_MAPPINGS[input_model.type]
    return output_class(
        input_model,
        json.loads(input_model.model_dump_json(by_alias=True, exclude_none=True)),
    )</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="activitypubdantic.get_class.Activity"><code class="flex name class">
<span>class <span class="ident">Activity</span></span>
<span>(</span><span>model: Union[<a title="activitypubdantic.models.core.ActivityModel" href="models/core.html#activitypubdantic.models.core.ActivityModel">ActivityModel</a>, <a title="activitypubdantic.models.actor.ActorModel" href="models/actor.html#activitypubdantic.models.actor.ActorModel">ActorModel</a>, <a title="activitypubdantic.models.core.CollectionModel" href="models/core.html#activitypubdantic.models.core.CollectionModel">CollectionModel</a>, <a title="activitypubdantic.models.core.LinkModel" href="models/core.html#activitypubdantic.models.core.LinkModel">LinkModel</a>, <a title="activitypubdantic.models.core.ObjectModel" href="models/core.html#activitypubdantic.models.core.ObjectModel">ObjectModel</a>], input_json: dict, default_languages: list = ['en', 'en-US'])</span>
</code></dt>
<dd>
<div class="desc"><p>Activity data and associated functions.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Activity(Object):
    &#34;&#34;&#34;
    Activity data and associated functions.
    &#34;&#34;&#34;

    # Core type
    core_type = &#34;Activity&#34;

    def undo(self):
        &#34;&#34;&#34;
        Produce a new Undo of this Activity.
        After insertion into database, add an ID.
        &#34;&#34;&#34;
        return get_class(
            {
                &#34;type&#34;: &#34;Undo&#34;,
                &#34;object&#34;: self._internal_data(),
            }
        )</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="activitypubdantic.get_class.Object" href="#activitypubdantic.get_class.Object">Object</a></li>
<li><a title="activitypubdantic.get_class.Base" href="#activitypubdantic.get_class.Base">Base</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="activitypubdantic.get_class.Activity.core_type"><code class="name">var <span class="ident">core_type</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="activitypubdantic.get_class.Activity.undo"><code class="name flex">
<span>def <span class="ident">undo</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Produce a new Undo of this Activity.
After insertion into database, add an ID.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def undo(self):
    &#34;&#34;&#34;
    Produce a new Undo of this Activity.
    After insertion into database, add an ID.
    &#34;&#34;&#34;
    return get_class(
        {
            &#34;type&#34;: &#34;Undo&#34;,
            &#34;object&#34;: self._internal_data(),
        }
    )</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="activitypubdantic.get_class.Object" href="#activitypubdantic.get_class.Object">Object</a></b></code>:
<ul class="hlist">
<li><code><a title="activitypubdantic.get_class.Object.create" href="#activitypubdantic.get_class.Object.create">create</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.data" href="#activitypubdantic.get_class.Base.data">data</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.delete" href="#activitypubdantic.get_class.Object.delete">delete</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.deliver_to" href="#activitypubdantic.get_class.Object.deliver_to">deliver_to</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.json" href="#activitypubdantic.get_class.Base.json">json</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.make_public" href="#activitypubdantic.get_class.Object.make_public">make_public</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.tombstone" href="#activitypubdantic.get_class.Object.tombstone">tombstone</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="activitypubdantic.get_class.Actor"><code class="flex name class">
<span>class <span class="ident">Actor</span></span>
<span>(</span><span>model: Union[<a title="activitypubdantic.models.core.ActivityModel" href="models/core.html#activitypubdantic.models.core.ActivityModel">ActivityModel</a>, <a title="activitypubdantic.models.actor.ActorModel" href="models/actor.html#activitypubdantic.models.actor.ActorModel">ActorModel</a>, <a title="activitypubdantic.models.core.CollectionModel" href="models/core.html#activitypubdantic.models.core.CollectionModel">CollectionModel</a>, <a title="activitypubdantic.models.core.LinkModel" href="models/core.html#activitypubdantic.models.core.LinkModel">LinkModel</a>, <a title="activitypubdantic.models.core.ObjectModel" href="models/core.html#activitypubdantic.models.core.ObjectModel">ObjectModel</a>], input_json: dict, default_languages: list = ['en', 'en-US'])</span>
</code></dt>
<dd>
<div class="desc"><p>Actor data and associated functions.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Actor(Object):
    &#34;&#34;&#34;
    Actor data and associated functions.
    &#34;&#34;&#34;

    # Core type
    core_type = &#34;Actor&#34;

    def activity(self, action_type: str, object: Object = None):
        &#34;&#34;&#34;
        Produce a new Activity of the given type with this Actor as the actor
        and the given Object as the object of the activity.
        Intransitive Activities have no object.
        After insertion into database, add an ID.
        &#34;&#34;&#34;
        return get_class(
            {
                &#34;type&#34;: action_type,
                &#34;actor&#34;: self._internal_data(),
                &#34;object&#34;: object.data() if object else None,
            }
        )</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="activitypubdantic.get_class.Object" href="#activitypubdantic.get_class.Object">Object</a></li>
<li><a title="activitypubdantic.get_class.Base" href="#activitypubdantic.get_class.Base">Base</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="activitypubdantic.get_class.Actor.core_type"><code class="name">var <span class="ident">core_type</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="activitypubdantic.get_class.Actor.activity"><code class="name flex">
<span>def <span class="ident">activity</span></span>(<span>self, action_type: str, object: <a title="activitypubdantic.get_class.Object" href="#activitypubdantic.get_class.Object">Object</a> = None)</span>
</code></dt>
<dd>
<div class="desc"><p>Produce a new Activity of the given type with this Actor as the actor
and the given Object as the object of the activity.
Intransitive Activities have no object.
After insertion into database, add an ID.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def activity(self, action_type: str, object: Object = None):
    &#34;&#34;&#34;
    Produce a new Activity of the given type with this Actor as the actor
    and the given Object as the object of the activity.
    Intransitive Activities have no object.
    After insertion into database, add an ID.
    &#34;&#34;&#34;
    return get_class(
        {
            &#34;type&#34;: action_type,
            &#34;actor&#34;: self._internal_data(),
            &#34;object&#34;: object.data() if object else None,
        }
    )</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="activitypubdantic.get_class.Object" href="#activitypubdantic.get_class.Object">Object</a></b></code>:
<ul class="hlist">
<li><code><a title="activitypubdantic.get_class.Object.create" href="#activitypubdantic.get_class.Object.create">create</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.data" href="#activitypubdantic.get_class.Base.data">data</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.delete" href="#activitypubdantic.get_class.Object.delete">delete</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.deliver_to" href="#activitypubdantic.get_class.Object.deliver_to">deliver_to</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.json" href="#activitypubdantic.get_class.Base.json">json</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.make_public" href="#activitypubdantic.get_class.Object.make_public">make_public</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.tombstone" href="#activitypubdantic.get_class.Object.tombstone">tombstone</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="activitypubdantic.get_class.Base"><code class="flex name class">
<span>class <span class="ident">Base</span></span>
<span>(</span><span>model: Union[<a title="activitypubdantic.models.core.ActivityModel" href="models/core.html#activitypubdantic.models.core.ActivityModel">ActivityModel</a>, <a title="activitypubdantic.models.actor.ActorModel" href="models/actor.html#activitypubdantic.models.actor.ActorModel">ActorModel</a>, <a title="activitypubdantic.models.core.CollectionModel" href="models/core.html#activitypubdantic.models.core.CollectionModel">CollectionModel</a>, <a title="activitypubdantic.models.core.LinkModel" href="models/core.html#activitypubdantic.models.core.LinkModel">LinkModel</a>, <a title="activitypubdantic.models.core.ObjectModel" href="models/core.html#activitypubdantic.models.core.ObjectModel">ObjectModel</a>], input_json: dict, default_languages: list = ['en', 'en-US'])</span>
</code></dt>
<dd>
<div class="desc"><p>Base extends default functions to all other classes.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Base:
    &#34;&#34;&#34;
    Base extends default functions to all other classes.
    &#34;&#34;&#34;

    def __init__(
        self,
        model: Union[
            ActivityModel, ActorModel, CollectionModel, LinkModel, ObjectModel
        ],
        input_json: dict,  # TODO: There&#39;s no way this could be a list, right?
        default_languages: list = _DEFAULT_LANGUAGES,
    ):
        self.model = model
        self.input_json = input_json
        self._data = self.data(
            exclude_none=False, by_alias=False, use_input_json=True
        )  # Use underscore to avoid conflict with data() function

        # For each key,value pair in the input_json, set the class attribute
        for k, v in self._data.items():
            if k not in _DEFAULT_PROTECTED_FIELDS:
                setattr(self, k, v)

        # For mapped fields, update their corresponding value with the default language
        for k, v in _DEFAULT_MAP_FIELDS.items():
            if k in self._data:
                for language in default_languages:
                    if self._data[k] and language in self._data[k]:
                        setattr(self, v, self._data[k][language])
                        break

    def _internal_data(self):
        &#34;&#34;&#34;
        Get the internal data dictionary of unprotected and not null fields.
        &#34;&#34;&#34;
        clean_data = {}
        for k, v in self.__dict__.items():
            if k not in _DEFAULT_PROTECTED_FIELDS and v:
                clean_data[k] = v
        return clean_data

    def data(
        self,
        by_alias: bool = True,
        exclude_none: bool = True,
        verbose: bool = True,
        use_input_json: bool = False,
    ):
        &#34;&#34;&#34;
        Return the class input_json as a Python dictionary or list with settings.
        &#34;&#34;&#34;
        return get_model_data(
            self.input_json if use_input_json else self._internal_data(),
            by_alias=by_alias,
            exclude_none=exclude_none,
            verbose=verbose,
        )

    def json(
        self,
        by_alias: bool = True,
        exclude_none: bool = True,
        verbose: bool = True,
        indent: int = 2,
        use_input_json: bool = False,
    ):
        &#34;&#34;&#34;
        Return the class input_json as a JSON string with settings.
        &#34;&#34;&#34;
        return get_model_json(
            self.input_json if use_input_json else self._internal_data(),
            by_alias=by_alias,
            exclude_none=exclude_none,
            verbose=verbose,
            indent=indent,
        )</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="activitypubdantic.get_class.Link" href="#activitypubdantic.get_class.Link">Link</a></li>
<li><a title="activitypubdantic.get_class.Object" href="#activitypubdantic.get_class.Object">Object</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="activitypubdantic.get_class.Base.data"><code class="name flex">
<span>def <span class="ident">data</span></span>(<span>self, by_alias: bool = True, exclude_none: bool = True, verbose: bool = True, use_input_json: bool = False)</span>
</code></dt>
<dd>
<div class="desc"><p>Return the class input_json as a Python dictionary or list with settings.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def data(
    self,
    by_alias: bool = True,
    exclude_none: bool = True,
    verbose: bool = True,
    use_input_json: bool = False,
):
    &#34;&#34;&#34;
    Return the class input_json as a Python dictionary or list with settings.
    &#34;&#34;&#34;
    return get_model_data(
        self.input_json if use_input_json else self._internal_data(),
        by_alias=by_alias,
        exclude_none=exclude_none,
        verbose=verbose,
    )</code></pre>
</details>
</dd>
<dt id="activitypubdantic.get_class.Base.json"><code class="name flex">
<span>def <span class="ident">json</span></span>(<span>self, by_alias: bool = True, exclude_none: bool = True, verbose: bool = True, indent: int = 2, use_input_json: bool = False)</span>
</code></dt>
<dd>
<div class="desc"><p>Return the class input_json as a JSON string with settings.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def json(
    self,
    by_alias: bool = True,
    exclude_none: bool = True,
    verbose: bool = True,
    indent: int = 2,
    use_input_json: bool = False,
):
    &#34;&#34;&#34;
    Return the class input_json as a JSON string with settings.
    &#34;&#34;&#34;
    return get_model_json(
        self.input_json if use_input_json else self._internal_data(),
        by_alias=by_alias,
        exclude_none=exclude_none,
        verbose=verbose,
        indent=indent,
    )</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="activitypubdantic.get_class.Collection"><code class="flex name class">
<span>class <span class="ident">Collection</span></span>
<span>(</span><span>model: Union[<a title="activitypubdantic.models.core.ActivityModel" href="models/core.html#activitypubdantic.models.core.ActivityModel">ActivityModel</a>, <a title="activitypubdantic.models.actor.ActorModel" href="models/actor.html#activitypubdantic.models.actor.ActorModel">ActorModel</a>, <a title="activitypubdantic.models.core.CollectionModel" href="models/core.html#activitypubdantic.models.core.CollectionModel">CollectionModel</a>, <a title="activitypubdantic.models.core.LinkModel" href="models/core.html#activitypubdantic.models.core.LinkModel">LinkModel</a>, <a title="activitypubdantic.models.core.ObjectModel" href="models/core.html#activitypubdantic.models.core.ObjectModel">ObjectModel</a>], input_json: dict, default_languages: list = ['en', 'en-US'])</span>
</code></dt>
<dd>
<div class="desc"><p>Collection data and associated functions.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Collection(Object):
    &#34;&#34;&#34;
    Collection data and associated functions.
    &#34;&#34;&#34;

    # Core type
    core_type = &#34;Collection&#34;

    def add(self, object: Object = None):
        &#34;&#34;&#34;
        Add an Object to the Collection.
        &#34;&#34;&#34;
        if object._internal_data() == {}:
            raise ValueError(&#34;Cannot add an empty Object.&#34;)

        # Use the items or ordered_items fields
        if &#34;items&#34; in self._internal_data():
            self.items.insert(0, object.data())
            items_count = len(self.items)
        elif &#34;ordered_items&#34; in self._internal_data():
            self.ordered_items.insert(0, object.data())
            items_count = len(self.ordered_items)

        # Update total items
        self.total_items = items_count

    def remove(self, object: Object = None):
        &#34;&#34;&#34;
        Remove an Object from the Collection.
        The Object must have an ID.
        &#34;&#34;&#34;
        if object._internal_data() == {}:
            raise ValueError(&#34;Cannot remove an empty Object.&#34;)
        if object.id is None:
            raise ValueError(&#34;Cannot remove an Object without an ID.&#34;)

        # Use the items or ordered_items fields
        if &#34;items&#34; in self._internal_data():
            self.items = [i for i in self.items if &#34;id&#34; in i and i[&#34;id&#34;] != object.id]
            items_count = len(self.items)
        elif &#34;ordered_items&#34; in self._internal_data():
            self.ordered_items = [
                i for i in self.ordered_items if &#34;id&#34; in i and i[&#34;id&#34;] != object.id
            ]
            items_count = len(self.ordered_items)

        # Update total items
        self.total_items = items_count</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="activitypubdantic.get_class.Object" href="#activitypubdantic.get_class.Object">Object</a></li>
<li><a title="activitypubdantic.get_class.Base" href="#activitypubdantic.get_class.Base">Base</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="activitypubdantic.get_class.Collection.core_type"><code class="name">var <span class="ident">core_type</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="activitypubdantic.get_class.Collection.add"><code class="name flex">
<span>def <span class="ident">add</span></span>(<span>self, object: <a title="activitypubdantic.get_class.Object" href="#activitypubdantic.get_class.Object">Object</a> = None)</span>
</code></dt>
<dd>
<div class="desc"><p>Add an Object to the Collection.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add(self, object: Object = None):
    &#34;&#34;&#34;
    Add an Object to the Collection.
    &#34;&#34;&#34;
    if object._internal_data() == {}:
        raise ValueError(&#34;Cannot add an empty Object.&#34;)

    # Use the items or ordered_items fields
    if &#34;items&#34; in self._internal_data():
        self.items.insert(0, object.data())
        items_count = len(self.items)
    elif &#34;ordered_items&#34; in self._internal_data():
        self.ordered_items.insert(0, object.data())
        items_count = len(self.ordered_items)

    # Update total items
    self.total_items = items_count</code></pre>
</details>
</dd>
<dt id="activitypubdantic.get_class.Collection.remove"><code class="name flex">
<span>def <span class="ident">remove</span></span>(<span>self, object: <a title="activitypubdantic.get_class.Object" href="#activitypubdantic.get_class.Object">Object</a> = None)</span>
</code></dt>
<dd>
<div class="desc"><p>Remove an Object from the Collection.
The Object must have an ID.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def remove(self, object: Object = None):
    &#34;&#34;&#34;
    Remove an Object from the Collection.
    The Object must have an ID.
    &#34;&#34;&#34;
    if object._internal_data() == {}:
        raise ValueError(&#34;Cannot remove an empty Object.&#34;)
    if object.id is None:
        raise ValueError(&#34;Cannot remove an Object without an ID.&#34;)

    # Use the items or ordered_items fields
    if &#34;items&#34; in self._internal_data():
        self.items = [i for i in self.items if &#34;id&#34; in i and i[&#34;id&#34;] != object.id]
        items_count = len(self.items)
    elif &#34;ordered_items&#34; in self._internal_data():
        self.ordered_items = [
            i for i in self.ordered_items if &#34;id&#34; in i and i[&#34;id&#34;] != object.id
        ]
        items_count = len(self.ordered_items)

    # Update total items
    self.total_items = items_count</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="activitypubdantic.get_class.Object" href="#activitypubdantic.get_class.Object">Object</a></b></code>:
<ul class="hlist">
<li><code><a title="activitypubdantic.get_class.Object.create" href="#activitypubdantic.get_class.Object.create">create</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.data" href="#activitypubdantic.get_class.Base.data">data</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.delete" href="#activitypubdantic.get_class.Object.delete">delete</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.deliver_to" href="#activitypubdantic.get_class.Object.deliver_to">deliver_to</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.json" href="#activitypubdantic.get_class.Base.json">json</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.make_public" href="#activitypubdantic.get_class.Object.make_public">make_public</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.tombstone" href="#activitypubdantic.get_class.Object.tombstone">tombstone</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="activitypubdantic.get_class.Link"><code class="flex name class">
<span>class <span class="ident">Link</span></span>
<span>(</span><span>model: Union[<a title="activitypubdantic.models.core.ActivityModel" href="models/core.html#activitypubdantic.models.core.ActivityModel">ActivityModel</a>, <a title="activitypubdantic.models.actor.ActorModel" href="models/actor.html#activitypubdantic.models.actor.ActorModel">ActorModel</a>, <a title="activitypubdantic.models.core.CollectionModel" href="models/core.html#activitypubdantic.models.core.CollectionModel">CollectionModel</a>, <a title="activitypubdantic.models.core.LinkModel" href="models/core.html#activitypubdantic.models.core.LinkModel">LinkModel</a>, <a title="activitypubdantic.models.core.ObjectModel" href="models/core.html#activitypubdantic.models.core.ObjectModel">ObjectModel</a>], input_json: dict, default_languages: list = ['en', 'en-US'])</span>
</code></dt>
<dd>
<div class="desc"><p>Link data and associated functions.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Link(Base):
    &#34;&#34;&#34;
    Link data and associated functions.
    &#34;&#34;&#34;

    # Core type
    core_type = &#34;Link&#34;</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="activitypubdantic.get_class.Base" href="#activitypubdantic.get_class.Base">Base</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="activitypubdantic.get_class.Link.core_type"><code class="name">var <span class="ident">core_type</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="activitypubdantic.get_class.Base" href="#activitypubdantic.get_class.Base">Base</a></b></code>:
<ul class="hlist">
<li><code><a title="activitypubdantic.get_class.Base.data" href="#activitypubdantic.get_class.Base.data">data</a></code></li>
<li><code><a title="activitypubdantic.get_class.Base.json" href="#activitypubdantic.get_class.Base.json">json</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="activitypubdantic.get_class.Object"><code class="flex name class">
<span>class <span class="ident">Object</span></span>
<span>(</span><span>model: Union[<a title="activitypubdantic.models.core.ActivityModel" href="models/core.html#activitypubdantic.models.core.ActivityModel">ActivityModel</a>, <a title="activitypubdantic.models.actor.ActorModel" href="models/actor.html#activitypubdantic.models.actor.ActorModel">ActorModel</a>, <a title="activitypubdantic.models.core.CollectionModel" href="models/core.html#activitypubdantic.models.core.CollectionModel">CollectionModel</a>, <a title="activitypubdantic.models.core.LinkModel" href="models/core.html#activitypubdantic.models.core.LinkModel">LinkModel</a>, <a title="activitypubdantic.models.core.ObjectModel" href="models/core.html#activitypubdantic.models.core.ObjectModel">ObjectModel</a>], input_json: dict, default_languages: list = ['en', 'en-US'])</span>
</code></dt>
<dd>
<div class="desc"><p>Object data and associated functions.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Object(Base):
    &#34;&#34;&#34;
    Object data and associated functions.
    &#34;&#34;&#34;

    # Core type
    core_type = &#34;Object&#34;

    def make_public(self):
        &#34;&#34;&#34;
        Remove any fields (bto and bcc) that should not be public.
        &#34;&#34;&#34;
        self.bto = None
        self.bcc = None

    def deliver_to(self, depth: int = 2):
        &#34;&#34;&#34;
        Recursively iterate to determine the audience.
        Use depth to set how deep the recursion should go.
        Some IDs may indicate collections, which must be handled differently.
        &#34;&#34;&#34;
        audience_fields = [&#34;to&#34;, &#34;bto&#34;, &#34;cc&#34;, &#34;bcc&#34;, &#34;audience&#34;]
        audience_members = []
        delivery_objects = [self._internal_data()]
        current_depth = 0

        # Iterate checking for the existence of delivery objects and our depth
        while current_depth &lt;= depth and len(delivery_objects) &gt; 0:
            new_delivery_objects = []
            for o in delivery_objects:
                for k, v in o.items():
                    if k in audience_fields and v:
                        audience_members += v

                    # If the key is an object, add it to the delivery objects
                    elif isinstance(v, dict) and v:
                        new_delivery_objects.append(v)

            # Set the new delivery objects
            delivery_objects = new_delivery_objects

            # Increase the delivery depth before looping again
            current_depth += 1

        # Get the id of each audience member and remove duplicates
        audience_members = [
            str(a[&#34;id&#34;]) if isinstance(a, dict) and &#34;id&#34; in a else str(a)
            for a in audience_members
        ]
        audience_members = list(set(audience_members))

        # Return the audience members
        return audience_members

    def create(self):
        &#34;&#34;&#34;
        Produce a new Activity of type Create with this Object.
        After insertion into database, add an ID.
        &#34;&#34;&#34;
        if self._internal_data() == {}:
            raise ValueError(&#34;Cannot create an empty Object.&#34;)
        return get_class(
            {
                &#34;type&#34;: &#34;Create&#34;,
                &#34;actor&#34;: self.actor,
                &#34;object&#34;: self._internal_data(),
                &#34;to&#34;: self.to,
                &#34;bto&#34;: self.bto,
                &#34;cc&#34;: self.cc,
                &#34;bcc&#34;: self.bcc,
                &#34;audience&#34;: self.audience,
                &#34;published&#34;: datetime.now(),
            }
        )

    def delete(self):
        &#34;&#34;&#34;
        Produce a new Activity of type Delete with this Object.
        Only provide an ID and published time for the Object.
        After insertion into database, add an ID.
        &#34;&#34;&#34;
        return get_class(
            {
                &#34;type&#34;: &#34;Delete&#34;,
                &#34;actor&#34;: self.actor,
                &#34;object&#34;: {
                    &#34;id&#34;: self.id,
                    &#34;published&#34;: self.published,
                },
                &#34;to&#34;: self.to,
                &#34;bto&#34;: self.bto,
                &#34;cc&#34;: self.cc,
                &#34;bcc&#34;: self.bcc,
                &#34;audience&#34;: self.audience,
                &#34;published&#34;: datetime.now(),
            }
        )

    def tombstone(self):
        &#34;&#34;&#34;
        Produce a new Tombstone.
        &#34;&#34;&#34;
        return get_class(
            {
                &#34;type&#34;: &#34;Tombstone&#34;,
                &#34;id&#34;: self.id,
                &#34;published&#34;: self.published,
                &#34;updated&#34;: datetime.now(),
                &#34;deleted&#34;: datetime.now(),
            }
        )</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="activitypubdantic.get_class.Base" href="#activitypubdantic.get_class.Base">Base</a></li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="activitypubdantic.get_class.Activity" href="#activitypubdantic.get_class.Activity">Activity</a></li>
<li><a title="activitypubdantic.get_class.Actor" href="#activitypubdantic.get_class.Actor">Actor</a></li>
<li><a title="activitypubdantic.get_class.Collection" href="#activitypubdantic.get_class.Collection">Collection</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="activitypubdantic.get_class.Object.core_type"><code class="name">var <span class="ident">core_type</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="activitypubdantic.get_class.Object.create"><code class="name flex">
<span>def <span class="ident">create</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Produce a new Activity of type Create with this Object.
After insertion into database, add an ID.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create(self):
    &#34;&#34;&#34;
    Produce a new Activity of type Create with this Object.
    After insertion into database, add an ID.
    &#34;&#34;&#34;
    if self._internal_data() == {}:
        raise ValueError(&#34;Cannot create an empty Object.&#34;)
    return get_class(
        {
            &#34;type&#34;: &#34;Create&#34;,
            &#34;actor&#34;: self.actor,
            &#34;object&#34;: self._internal_data(),
            &#34;to&#34;: self.to,
            &#34;bto&#34;: self.bto,
            &#34;cc&#34;: self.cc,
            &#34;bcc&#34;: self.bcc,
            &#34;audience&#34;: self.audience,
            &#34;published&#34;: datetime.now(),
        }
    )</code></pre>
</details>
</dd>
<dt id="activitypubdantic.get_class.Object.delete"><code class="name flex">
<span>def <span class="ident">delete</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Produce a new Activity of type Delete with this Object.
Only provide an ID and published time for the Object.
After insertion into database, add an ID.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def delete(self):
    &#34;&#34;&#34;
    Produce a new Activity of type Delete with this Object.
    Only provide an ID and published time for the Object.
    After insertion into database, add an ID.
    &#34;&#34;&#34;
    return get_class(
        {
            &#34;type&#34;: &#34;Delete&#34;,
            &#34;actor&#34;: self.actor,
            &#34;object&#34;: {
                &#34;id&#34;: self.id,
                &#34;published&#34;: self.published,
            },
            &#34;to&#34;: self.to,
            &#34;bto&#34;: self.bto,
            &#34;cc&#34;: self.cc,
            &#34;bcc&#34;: self.bcc,
            &#34;audience&#34;: self.audience,
            &#34;published&#34;: datetime.now(),
        }
    )</code></pre>
</details>
</dd>
<dt id="activitypubdantic.get_class.Object.deliver_to"><code class="name flex">
<span>def <span class="ident">deliver_to</span></span>(<span>self, depth: int = 2)</span>
</code></dt>
<dd>
<div class="desc"><p>Recursively iterate to determine the audience.
Use depth to set how deep the recursion should go.
Some IDs may indicate collections, which must be handled differently.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def deliver_to(self, depth: int = 2):
    &#34;&#34;&#34;
    Recursively iterate to determine the audience.
    Use depth to set how deep the recursion should go.
    Some IDs may indicate collections, which must be handled differently.
    &#34;&#34;&#34;
    audience_fields = [&#34;to&#34;, &#34;bto&#34;, &#34;cc&#34;, &#34;bcc&#34;, &#34;audience&#34;]
    audience_members = []
    delivery_objects = [self._internal_data()]
    current_depth = 0

    # Iterate checking for the existence of delivery objects and our depth
    while current_depth &lt;= depth and len(delivery_objects) &gt; 0:
        new_delivery_objects = []
        for o in delivery_objects:
            for k, v in o.items():
                if k in audience_fields and v:
                    audience_members += v

                # If the key is an object, add it to the delivery objects
                elif isinstance(v, dict) and v:
                    new_delivery_objects.append(v)

        # Set the new delivery objects
        delivery_objects = new_delivery_objects

        # Increase the delivery depth before looping again
        current_depth += 1

    # Get the id of each audience member and remove duplicates
    audience_members = [
        str(a[&#34;id&#34;]) if isinstance(a, dict) and &#34;id&#34; in a else str(a)
        for a in audience_members
    ]
    audience_members = list(set(audience_members))

    # Return the audience members
    return audience_members</code></pre>
</details>
</dd>
<dt id="activitypubdantic.get_class.Object.make_public"><code class="name flex">
<span>def <span class="ident">make_public</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Remove any fields (bto and bcc) that should not be public.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def make_public(self):
    &#34;&#34;&#34;
    Remove any fields (bto and bcc) that should not be public.
    &#34;&#34;&#34;
    self.bto = None
    self.bcc = None</code></pre>
</details>
</dd>
<dt id="activitypubdantic.get_class.Object.tombstone"><code class="name flex">
<span>def <span class="ident">tombstone</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Produce a new Tombstone.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def tombstone(self):
    &#34;&#34;&#34;
    Produce a new Tombstone.
    &#34;&#34;&#34;
    return get_class(
        {
            &#34;type&#34;: &#34;Tombstone&#34;,
            &#34;id&#34;: self.id,
            &#34;published&#34;: self.published,
            &#34;updated&#34;: datetime.now(),
            &#34;deleted&#34;: datetime.now(),
        }
    )</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="activitypubdantic.get_class.Base" href="#activitypubdantic.get_class.Base">Base</a></b></code>:
<ul class="hlist">
<li><code><a title="activitypubdantic.get_class.Base.data" href="#activitypubdantic.get_class.Base.data">data</a></code></li>
<li><code><a title="activitypubdantic.get_class.Base.json" href="#activitypubdantic.get_class.Base.json">json</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="activitypubdantic" href="index.html">activitypubdantic</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="activitypubdantic.get_class.get_class" href="#activitypubdantic.get_class.get_class">get_class</a></code></li>
<li><code><a title="activitypubdantic.get_class.get_class_from_model" href="#activitypubdantic.get_class.get_class_from_model">get_class_from_model</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="activitypubdantic.get_class.Activity" href="#activitypubdantic.get_class.Activity">Activity</a></code></h4>
<ul class="">
<li><code><a title="activitypubdantic.get_class.Activity.core_type" href="#activitypubdantic.get_class.Activity.core_type">core_type</a></code></li>
<li><code><a title="activitypubdantic.get_class.Activity.undo" href="#activitypubdantic.get_class.Activity.undo">undo</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="activitypubdantic.get_class.Actor" href="#activitypubdantic.get_class.Actor">Actor</a></code></h4>
<ul class="">
<li><code><a title="activitypubdantic.get_class.Actor.activity" href="#activitypubdantic.get_class.Actor.activity">activity</a></code></li>
<li><code><a title="activitypubdantic.get_class.Actor.core_type" href="#activitypubdantic.get_class.Actor.core_type">core_type</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="activitypubdantic.get_class.Base" href="#activitypubdantic.get_class.Base">Base</a></code></h4>
<ul class="">
<li><code><a title="activitypubdantic.get_class.Base.data" href="#activitypubdantic.get_class.Base.data">data</a></code></li>
<li><code><a title="activitypubdantic.get_class.Base.json" href="#activitypubdantic.get_class.Base.json">json</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="activitypubdantic.get_class.Collection" href="#activitypubdantic.get_class.Collection">Collection</a></code></h4>
<ul class="">
<li><code><a title="activitypubdantic.get_class.Collection.add" href="#activitypubdantic.get_class.Collection.add">add</a></code></li>
<li><code><a title="activitypubdantic.get_class.Collection.core_type" href="#activitypubdantic.get_class.Collection.core_type">core_type</a></code></li>
<li><code><a title="activitypubdantic.get_class.Collection.remove" href="#activitypubdantic.get_class.Collection.remove">remove</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="activitypubdantic.get_class.Link" href="#activitypubdantic.get_class.Link">Link</a></code></h4>
<ul class="">
<li><code><a title="activitypubdantic.get_class.Link.core_type" href="#activitypubdantic.get_class.Link.core_type">core_type</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="activitypubdantic.get_class.Object" href="#activitypubdantic.get_class.Object">Object</a></code></h4>
<ul class="two-column">
<li><code><a title="activitypubdantic.get_class.Object.core_type" href="#activitypubdantic.get_class.Object.core_type">core_type</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.create" href="#activitypubdantic.get_class.Object.create">create</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.delete" href="#activitypubdantic.get_class.Object.delete">delete</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.deliver_to" href="#activitypubdantic.get_class.Object.deliver_to">deliver_to</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.make_public" href="#activitypubdantic.get_class.Object.make_public">make_public</a></code></li>
<li><code><a title="activitypubdantic.get_class.Object.tombstone" href="#activitypubdantic.get_class.Object.tombstone">tombstone</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>